<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ç–æ—Ä—Ç—ñ–≤ | –ö—Ä–µ–º—É–∞</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="icon" href="https://github.com/cakeboxdeveloper/kremua/raw/refs/heads/main/AIcon.ico" type="image/x-icon">

<style>
body { 
  margin: 0;
  font-family: Arial, sans-serif; 
  background: #17212b;
  color: white;
  overflow-x: hidden;
  touch-action: pan-y pinch-zoom;
  -webkit-overflow-scrolling: touch;
}

/* –°–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π —Å—Ç–∏–ª—å –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ñ–æ—Ä–º–∞—Ç—ñ–≤ */
#formatsSlider {
  display: flex;
  justify-content: space-between; /* –†–æ–∑–ø–æ–¥—ñ–ª—è—î –∫–Ω–æ–ø–∫–∏ —Ä—ñ–≤–Ω–æ–º—ñ—Ä–Ω–æ */
  overflow: hidden;              /* –ü—Ä–∏–±–∏—Ä–∞—î–º–æ –∑–∞–π–≤–∏–π —Å–∫—Ä–æ–ª */
  gap: 4px;                      /* –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –≤—ñ–¥—Å—Ç—É–ø –º—ñ–∂ –∫–Ω–æ–ø–∫–∞–º–∏ */
}

#formatsSlider .format-tag {
  flex: 1;                       /* –ö–æ–∂–Ω–∞ –∫–Ω–æ–ø–∫–∞ –∑–∞–π–º–∞—î –æ–¥–Ω–∞–∫–æ–≤—É —á–∞—Å—Ç–∏–Ω—É –ø—Ä–æ—Å—Ç–æ—Ä—É */
  text-align: center;            /* –¢–µ–∫—Å—Ç –ø–æ —Ü–µ–Ω—Ç—Ä—É –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–Ω–æ–ø–∫–∏ */
  padding: 10px 4px;             /* –ó–º–µ–Ω—à—É—î–º–æ –±—ñ—á–Ω—ñ –≤—ñ–¥—Å—Ç—É–ø–∏, —â–æ–± –≤–ª—ñ–∑–ª–æ –Ω–∞ –º–∞–ª–∏—Ö –µ–∫—Ä–∞–Ω–∞—Ö */
  font-size: 13px;               /* –¢—Ä–æ—Ö–∏ –º–µ–Ω—à–∏–π —à—Ä–∏—Ñ—Ç –¥–ª—è –≥–∞—Ä–∞–Ω—Ç—ñ—ó –≤—Ö–æ–¥—É –≤ —Ä—è–¥–æ–∫ */
  min-width: 0;                  /* –î–æ–∑–≤–æ–ª—è—î —Ñ–ª–µ–∫—Å-–µ–ª–µ–º–µ–Ω—Ç—É —Å—Ç–∏—Å–∫–∞—Ç–∏—Å—è –º–µ–Ω—à–µ –∑–∞ –π–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç */
}
  
html {
  overflow-x: hidden;
  width: 100%;
  position: relative;
}

* {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

input, textarea {
  -webkit-user-select: text;
  user-select: text;
}

.app {
  max-width: 390px;
  min-height: 100vh;
  margin: 0 auto;
  padding: 16px;
}

/* ===== –õ–û–ì–û ===== */
.header {
  text-align: center;
  margin-top: -40px;
  margin-bottom: -40px;
}

.header video {
  width: 512px;
  max-width: 100%;
  display: block;
  margin: 0 auto;
  mask-image: linear-gradient(to right, transparent 0%, black 5%, black 95%, transparent 100%),
              linear-gradient(to bottom, transparent 0%, black 5%, black 95%, transparent 100%);
  -webkit-mask-image: linear-gradient(to right, transparent 0%, black 5%, black 95%, transparent 100%),
                      linear-gradient(to bottom, transparent 0%, black 5%, black 95%, transparent 100%);
}

/* ===== –°–ï–†–í–ò–° –ò–ù–§–û ===== */
.service-info {
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: center;
  margin-top: 12px;
  padding: 0 16px;
}

.service-name {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 22px;
  font-weight: 700;
  color: #6ab2f2;
  z-index: 1000;
  position: relative;
}

.service-icon {
  width: 19px;
  height: 19px;
  filter: brightness(0) saturate(100%) invert(64%) sepia(66%) saturate(1044%) hue-rotate(178deg) brightness(101%) contrast(93%);
}

.service-users {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: #ffffff;
  opacity: 1;
  margin-bottom: 10px;
}

.users-count {
  font-weight: 700;
  color: #ffffff;
  font-size: 13px;
}

/* ===== FAQ –ë–õ–û–ö ===== */
.faq-block {
  text-align: center;
  margin-bottom: 20px;
}

.faq-content1 {
  background: #1d2b3a;
  border: 1px solid #6ab2f2;
  border-radius: 4px;
  padding: 8px;
  font-size: 15px;
  line-height: 1.4;
  color: #ffffff;
}

/* ===== –°–õ–ê–ô–î–ï–†–´ ===== */
.slider-section {
  margin-bottom: 16px;
}

.slider-label {
  font-size: 15px;
  font-weight: 400;
  color: #6ab2f2;
  margin-bottom: 8px;
  display: block;
  text-align: center;
  background: #1d2b3a;
  border: 1px solid #6ab2f2;
  border-radius: 4px;
  padding: 8px;
}

.slider-container {
  display: flex;
  gap: 8px;
  overflow-x: auto;
  overflow-y: hidden;
  padding: 4px 0;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  -ms-overflow-style: none;
  
  /* üéØ –†–ê–ó–ú–´–¢–ò–ï */
  mask-image: none;
  -webkit-mask-image: none;
  transition: mask-image 0.3s ease, -webkit-mask-image 0.3s ease;
}

/* üéØ –†–ê–ó–ú–´–¢–ò–ï –°–õ–ï–í–ê */
.slider-container.blur-left {
  mask-image: linear-gradient(to right, transparent 0%, black 10%, black 100%);
  -webkit-mask-image: linear-gradient(to right, transparent 0%, black 10%, black 100%);
}

/* üéØ –†–ê–ó–ú–´–¢–ò–ï –°–ü–†–ê–í–ê */
.slider-container.blur-right {
  mask-image: linear-gradient(to right, black 0%, black 90%, transparent 100%);
  -webkit-mask-image: linear-gradient(to right, black 0%, black 90%, transparent 100%);
}

/* üéØ –†–ê–ó–ú–´–¢–ò–ï –° –û–ë–ï–ò–• –°–¢–û–†–û–ù */
.slider-container.blur-both {
  mask-image: linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%);
  -webkit-mask-image: linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%);
}

.slider-container::-webkit-scrollbar {
  display: none;
}

.slider-tag {
  display: inline-block;
  padding: 10px 18px;
  color: #6ab2f2;
  background: #1d2b3a;
  border-radius: 4px;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  flex-shrink: 0;
  cursor: pointer;
  user-select: none;
  border: 2px solid transparent;
  transition: all 0.2s ease;
}

.slider-tag:hover {
 
  opacity: 0.85;
}

.slider-tag.selected {
  background: #6ab2f2 !important;
  color: #17212b !important;
  
}

/* –¶–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–ª–∞–π–¥–µ—Ä–æ–≤ */
.type-tag {
  color: #f27db0;
  background: #3a1d2b;
}

.type-tag.selected {
  background: #f27db0 !important;
}

.additive-tag {
  color: #a3f26a;
  background: #1d3a22;
}

.additive-tag.selected {
  background: #a3f26a !important;
  color: #17212b !important;
}

.format-tag {
  color: #f7a632;
  background: #443621;
}

.format-tag.selected {
  background: #f7a632 !important;
  color: #17212b !important;
}

/* ===== –ü–û–õ–ï –ö–û–ú–ú–ï–ù–¢–ê–†–ò–Ø ===== */
.comment-section {
  margin-bottom: 16px;
}

.comment-textarea {
  width: 100%;
  min-height: 100px;
  padding: 12px;
  background: #1d2b3a;
  border: 1px solid #6ab2f2;
  border-radius: 4px;
  color: #ffffff;
  font-size: 14px;
  font-family: Arial, sans-serif;
  resize: vertical;
  box-sizing: border-box;
}

.comment-textarea::placeholder {
  color: #6ab2f2;
  opacity: 0.6;
}

/* ===== –ö–ù–û–ü–ö–ê –°–û–ó–î–ê–¢–¨ ===== */
.create-btn {
  width: 100%;
  padding: 14px 0;
  margin-bottom: 10px;
  text-align: center;
  font-size: 16px;
  font-weight: 700;
  color: #6af27d;
  background: #1d3a22;
  border: 1px solid #6af27d;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.create-btn:hover {
  background: #24502f;
}

.create-btn:active {
  transform: scale(0.96);
}

/* ===== –ö–ù–û–ü–ö–ê –ù–ê–ó–ê–î ===== */
.back-btn-full {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  font-weight: 700;
  color: #6ab2f2;
  background: #1d2b3a;
  border: 1px solid #6ab2f2;
  border-radius: 6px;
  padding: 12px;
  cursor: pointer;
  transition: transform 0.15s ease;
  text-decoration: none;
  margin-bottom: 10px;
  box-sizing: border-box;
}

.back-btn-full:active {
  transform: scale(0.96);
}

/* ===== –õ–û–ê–î–ï–† ===== */
.loader {
  position: fixed;
  inset: 0;
  background: #17212b;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.35s ease;
}

.loader.active {
  opacity: 1;
  pointer-events: all;
}

.loader img {
  width: 150px;
  height: 150px;
}

.loader-text {
  margin-top: 16px;
  font-size: 16px;
  color: #6ab2f2;
  font-weight: 600;
}

.loader.blur-mode {
  background: rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

/* ===== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û PDF ===== */
.pdf-modal {
  position: fixed;
  inset: 0;
  background: transparent;
  backdrop-filter: blur(0);
  -webkit-backdrop-filter: blur(0);
  z-index: 9998;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: all 0.4s ease;
}

.pdf-modal.active {
  opacity: 1;
  pointer-events: all;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  background: rgba(0, 0, 0, 0.5);
}

.pdf-modal-content {
  background: #1d2b3a;
  border: 2px solid #6ab2f2;
  border-radius: 12px;
  padding: 24px;
  max-width: 90%;
  width: 350px;
  text-align: center;
  transform: scale(0.8);
  opacity: 0;
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.pdf-modal.active .pdf-modal-content {
  transform: scale(1);
  opacity: 1;
}

.pdf-hint {
  font-size: 13px;
  color: #6ab2f2;
  margin-bottom: 16px;
  line-height: 1.4;
}

.pdf-preview {
  width: 100%;
  max-height: 400px;
  background: white;
  border-radius: 8px;
  margin-bottom: 16px;
  overflow: hidden;
}

.download-btn {
  width: 100%;
  padding: 14px;
  background: #1d3a22;
  border: 1px solid #6af27d;
  color: #6af27d;
  border-radius: 6px;
  font-size: 16px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s ease;
  margin-bottom: 8px;
}

.download-btn:hover {
  background: #24502f;
}

.download-btn:active {
  transform: scale(0.96);
}

.close-modal-btn {
  width: 100%;
  padding: 12px;
  background: transparent;
  border: 1px solid #6ab2f2;
  color: #6ab2f2;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.close-modal-btn:hover {
  background: #22364a;
}

.close-modal-btn:active {
  transform: scale(0.96);
}

/* ===== –°–û–¶–°–ï–¢–ò ===== */
.bottom-actions {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.action-btn {
  flex: 1;
  padding: 14px 0;
  text-align: center;
  font-size: 15px;
  font-weight: 600;
  text-decoration: none;
  color: #fff;
  border-radius: 6px;
  transition: transform 0.15s ease;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.action-btn:active {
  transform: scale(0.96);
}

.telegram-btn {
  background: #1d2b3a;
  border: 1px solid #6ab2f2;
  color: #6ab2f2;
}

.telegram-btn:hover {
  background: #22364a;
}

.instagram-btn {
  background: #3a1d2b;
  border: 1px solid #f27db0;
  color: #f27db0;
}

.instagram-btn:hover {
  background: #4a2236;
}
</style>
</head>
<body>

<!-- –õ–û–ê–î–ï–† -->
<div id="loader" class="loader active">
  <img src="https://github.com/Tarikul-Islam-Anik/Telegram-Animated-Emojis/blob/main/Objects/Hourglass%20Done.webp?raw=true" alt="–ó–∞–≥—Ä—É–∑–∫–∞">
  <div class="loader-text">–°—Ç–≤–æ—Ä—é—î–º–æ –∫—Ä–µ—Å–ª–µ–Ω–Ω—è...</div>
</div>

<div class="app">
  <!-- HEADER -->
  <div class="header">
    <video autoplay loop muted playsinline>
      <source src="https://cdn.jsdelivr.net/gh/cakeboxdeveloper/kremua@main/ModAvatarModRender.webm" type="video/webm">
    </video>
  </div>

  <!-- –°–ï–†–í–ò–° –ò–ù–§–û -->
  <div class="service-info">
    <div class="service-name">
      <img src="https://raw.githubusercontent.com/CakeBoxDeveloper/kremua/73b661456b59a8bc190ef95c25d08af249023969/5258506.svg" alt="" class="service-icon">
      <span>–ö—Ä–µ–º—É–∞ÃÅ</span>
    </div>
    <div class="service-users">
      <span class="users-count">1247</span>
      <span>–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</span>
    </div>
  </div>

  <!-- –û–ü–ò–°–ê–ù–ò–ï -->
  <div class="faq-block">
    <div class="faq-content1">
      –°—Ç–≤–æ—Ä—ñ—Ç—å –≤–ª–∞—Å–Ω–∏–π —Ç–æ—Ä—Ç –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞. –û–±–µ—Ä—ñ—Ç—å —Ç–∏–ø, –Ω–∞—á–∏–Ω–∫—É, –¥–æ–±–∞–≤–∫–∏ —Ç–∞ —Ñ–æ—Ä–º–∞—Ç ‚Äî –º–∏ –ø—ñ–¥–≥–æ—Ç—É—î–º–æ —Ç–µ—Ö–Ω—ñ—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è –∫–æ–Ω–¥–∏—Ç–µ—Ä–∞.
    </div>
  </div>

  <!-- –¢–ò–ü –¢–û–†–¢–ê -->
  <div class="slider-section">
    <div class="slider-label">–¢–∏–ø —Ç–æ—Ä—Ç–∞</div>
    <div class="slider-container" id="typeSlider"></div>
  </div>

  <!-- –ù–ê–ß–ò–ù–ö–ò -->
  <div class="slider-section">
    <div class="slider-label">–ù–∞—á–∏–Ω–∫–∞</div>
    <div class="slider-container" id="fillingsSlider"></div>
  </div>

  <!-- –î–û–ë–ê–í–ö–ò -->
  <div class="slider-section">
    <div class="slider-label">–î–æ–±–∞–≤–∫–∏</div>
    <div class="slider-container" id="additivesSlider"></div>
  </div>

  <!-- –§–û–†–ú–ê–¢–´ -->
  <div class="slider-section">
    <div class="slider-label">–§–æ—Ä–º–∞—Ç</div>
    <div class="slider-container" id="formatsSlider"></div>
  </div>

  <!-- –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ô -->
  <div class="comment-section">
    <div class="slider-label">–î–æ–¥–∞—Ç–∫–æ–≤–∏–π –∫–æ–º–µ–Ω—Ç–∞—Ä</div>
    <textarea 
      id="commentField" 
      class="comment-textarea" 
      placeholder="–í–ø–∏—à—ñ—Ç—å —Å—é–¥–∏ —â–æ –∑–∞–≤–≥–æ–¥–Ω–æ: –æ—Å–æ–±–ª–∏–≤—ñ –ø–æ–±–∞–∂–∞–Ω–Ω—è, –¥–∏–∑–∞–π–Ω, –¥–∞—Ç—É –≤–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—è..."
    ></textarea>
  </div>

  <!-- –ö–ù–û–ü–ö–ê –°–û–ó–î–ê–¢–¨ -->
  <button class="create-btn" id="createBtn">
    <img src="https://raw.githubusercontent.com/lucide-icons/lucide/main/icons/drafting-compass.svg" style="width: 20px; height: 20px; filter: brightness(0) saturate(100%) invert(78%) sepia(48%) saturate(426%) hue-rotate(72deg) brightness(98%) contrast(93%);">
    –ù–∞–∫—Ä–µ—Å–ª–∏—Ç–∏ —Ç–æ—Ä—Ç
  </button>

  <!-- –ö–ù–û–ü–ö–ê –ù–ê–ó–ê–î -->
  <a href="index.html" class="back-btn-full">
    <img src="https://raw.githubusercontent.com/lucide-icons/lucide/main/icons/arrow-left.svg" style="width: 18px; height: 18px; margin-right: 6px; filter: brightness(0) saturate(100%) invert(64%) sepia(66%) saturate(1044%) hue-rotate(178deg) brightness(101%) contrast(93%);">
    –ù–∞–∑–∞–¥ –Ω–∞ –≥–æ–ª–æ–≤–Ω—É
  </a>

  <!-- –°–û–¶–°–ï–¢–ò -->
  <div class="bottom-actions">
    <a href="https://t.me/Olga_Dind" class="action-btn telegram-btn">
      <img src="https://raw.githubusercontent.com/lucide-icons/lucide/main/icons/send.svg" style="width: 18px; height: 18px; filter: brightness(0) saturate(100%) invert(64%) sepia(66%) saturate(1044%) hue-rotate(178deg) brightness(101%) contrast(93%);">
      Telegram
    </a>
    <a href="https://www.instagram.com/kremua_studio" class="action-btn instagram-btn">
      <img src="https://raw.githubusercontent.com/lucide-icons/lucide/main/icons/instagram.svg" style="width: 18px; height: 18px; filter: brightness(0) saturate(100%) invert(70%) sepia(58%) saturate(1313%) hue-rotate(298deg) brightness(102%) contrast(90%);">
      Instagram
    </a>
  </div>
</div>

<!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û PDF -->
<div id="pdfModal" class="pdf-modal">
  <div class="pdf-modal-content">
    <p class="pdf-hint">
  –¶–µ –≤–∞—à–µ —Ç–µ—Ö–Ω—ñ—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è. –ó–±–µ—Ä–µ–∂—ñ—Ç—å –π–æ–≥–æ —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤—Ç–µ –∫–æ–Ω–¥–∏—Ç–µ—Ä—É —Ä–∞–∑–æ–º —ñ–∑ —Ñ–æ—Ç–æ –±–∞–∂–∞–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω—É —Ç–æ—Ä—Ç–∞.
</p>
    <div class="pdf-preview" id="pdfPreview"></div>
    <button class="download-btn" id="downloadBtn">
      –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ PDF
    </button>
    <button class="close-modal-btn" id="closeModalBtn">
      –ó–∞–∫—Ä–∏—Ç–∏
    </button>
  </div>
</div>

 

<script>
// ===== –î–ê–ù–ù–´–ï =====
const cakeTypes = [
  "#–±–µ–∑–µ", "#–±—ñ—Å–∫–≤—ñ—Ç", "#—Å–ª–æ—î–Ω–µ —Ç—ñ—Å—Ç–æ", 
  "#–≥–æ—Ä—ñ—Ö–æ–≤–∏–π", "#—à–æ–∫–æ–ª–∞–¥–Ω–∏–π", "#—Å–∏—Ä–Ω–∏–π"
];

const allFillings = [
  "#—Ñ—ñ—Å—Ç–∞—à–∫–∞", "#–±—Ä–∞—É–Ω—ñ", "#–∫–∞—Ä–∞–º–µ–ª—å", "#–ª–∞—Ç—Ç–µ", 
  "#–ø–ª–æ–º–±—ñ—Ä", "#—Ä–æ–º", "#–ø—ñ–Ω–∞–∫–æ–ª–∞–¥–∞", "#—Å—ñ–Ω–∞–±–æ–Ω",
  "#–º—É—Å–∫–∞—Ç", "#—ñ—Ä–ª–∞–Ω–¥—Å—å–∫–∏–π –≤—ñ—Å–∫—ñ", "#–º—É–ª—å—Ç–∏—Ñ—Ä—É–∫—Ç",
  "#–ª—ñ—Å–æ–≤—ñ —è–≥–æ–¥–∏", "#–±–∞–Ω–∞–Ω", "#–º–æ—Ö—ñ—Ç–æ", "#–º–∞—Ç—á–∞",
  "#–±–∞–±–ª–≥–∞–º", "#—Å–Ω—ñ–∫–µ—Ä—Å", "#–æ—Ä–µ–æ", "#—Ç—ñ—Ä–∞–º—ñ—Å—É",
  "#–≤–∞–Ω—ñ–ª—å", "#–≥–ª—ñ–Ω—Ç–≤–µ–π–Ω", "#–º–µ–¥", "#—Ü–∏—Ç—Ä—É—Å",
  "#—Ç—Ä–æ–ø—ñ–∫", "#–∞–±—Ä–∏–∫–æ—Å", "#–≤–∏—à–Ω—è", "#–ø—Ä–∞–ª—ñ–Ω–µ"
];

const additives = [
  "#–≤–æ–ª–æ—Å—å–∫—ñ –≥–æ—Ä—ñ—Ö–∏", "#–º–∏–≥–¥–∞–ª—å", "#—Ñ—É–Ω–¥—É–∫",
  "#–∂–µ–ª–µ", "#—Ä–∏—Å–æ–≤—ñ –∫—É–ª—å–∫–∏", "#–º–∞—Ä—à–º–µ–ª–æ—É",
  "#—à–æ–∫–æ–ª–∞–¥–Ω—ñ —á—ñ–ø—Å–∏", "#–∫–æ–∫–æ—Å–æ–≤–∞ —Å—Ç—Ä—É–∂–∫–∞",
  "#—Å—É—Ö–æ—Ñ—Ä—É–∫—Ç–∏", "#–∫–∞—Ä–∞–º–µ–ª—å–Ω–∏–π –ø–æ–ø–∫–æ—Ä–Ω"
];

const formats = [
  "#—Å–ø–ª—ñ—Ç", "#–±–µ–Ω—Ç–æ", "#–º–∞–∫—Å—ñ", "#XXL"
];

// ===== –°–û–ó–î–ê–ù–ò–ï –°–õ–ê–ô–î–ï–†–û–í =====
function createSlider(containerId, items, className, multiSelect = false) {
  const container = document.getElementById(containerId);
  items.forEach(item => {
    const tag = document.createElement('span');
    tag.className = `slider-tag ${className}`;
    tag.textContent = item;
    tag.onclick = function() {
      if (multiSelect) {
        // Multi-select: –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ
        this.classList.toggle('selected');
      } else {
        // Single-select: deselect –∏–ª–∏ –≤—ã–±–æ—Ä –æ–¥–Ω–æ–≥–æ
        if (this.classList.contains('selected')) {
          this.classList.remove('selected');
        } else {
          container.querySelectorAll('.slider-tag').forEach(t => t.classList.remove('selected'));
          this.classList.add('selected');
        }
      }
    };
    container.appendChild(tag);
  });
  
  // üéØ –î–û–ë–ê–í–õ–Ø–ï–ú –†–ê–ó–ú–´–¢–ò–ï (–∫—Ä–æ–º–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤)
  if (containerId !== 'formatsSlider') {
    updateSliderBlur(container);
    container.addEventListener('scroll', () => updateSliderBlur(container));
    window.addEventListener('resize', () => updateSliderBlur(container));
  }
}

// üéØ –§–£–ù–ö–¶–ò–Ø –û–ë–ù–û–í–õ–ï–ù–ò–Ø –†–ê–ó–ú–´–¢–ò–Ø
function updateSliderBlur(container) {
  const scrollLeft = container.scrollLeft;
  const maxScroll = container.scrollWidth - container.clientWidth;
  const threshold = 5;
  
  const atStart = scrollLeft <= threshold;
  const atEnd = scrollLeft >= maxScroll - threshold;
  
  container.classList.remove('blur-left', 'blur-right', 'blur-both');
  
  if (atStart && !atEnd) {
    container.classList.add('blur-right');
  } else if (atEnd && !atStart) {
    container.classList.add('blur-left');
  } else if (!atStart && !atEnd) {
    container.classList.add('blur-both');
  }
}

createSlider('typeSlider', cakeTypes, 'type-tag');
createSlider('fillingsSlider', allFillings, 'slider-tag', true); // true = multi-select
createSlider('additivesSlider', additives, 'additive-tag', true); // true = multi-select
createSlider('formatsSlider', formats, 'format-tag');

// ===== –°–ë–û–† –î–ê–ù–ù–´–• =====
function getSelectedData() {
  const type = document.querySelector('#typeSlider .slider-tag.selected')?.textContent || '–Ω–µ –æ–±—Ä–∞–Ω–æ';
  
  // –î–ª—è –Ω–∞—á–∏–Ω–æ–∫ ‚Äî —Å–æ–±–∏—Ä–∞–µ–º –í–°–ï –≤—ã–±—Ä–∞–Ω–Ω—ã–µ
  const fillingTags = document.querySelectorAll('#fillingsSlider .slider-tag.selected');
  const filling = fillingTags.length > 0 
    ? Array.from(fillingTags).map(tag => tag.textContent).join(', ') 
    : '–Ω–µ –æ–±—Ä–∞–Ω–æ';
  
  // –î–ª—è –¥–æ–±–∞–≤–æ–∫ ‚Äî —Å–æ–±–∏—Ä–∞–µ–º –í–°–ï –≤—ã–±—Ä–∞–Ω–Ω—ã–µ
  const additiveTags = document.querySelectorAll('#additivesSlider .slider-tag.selected');
  const additive = additiveTags.length > 0 
    ? Array.from(additiveTags).map(tag => tag.textContent).join(', ') 
    : '–Ω–µ –æ–±—Ä–∞–Ω–æ';
  
  const format = document.querySelector('#formatsSlider .slider-tag.selected')?.textContent || '–Ω–µ –æ–±—Ä–∞–Ω–æ';
  const comment = document.getElementById('commentField').value || '–Ω–µ–º–∞—î';
  
  return { type, filling, additive, format, comment };
}

// ===== SVG –ß–ï–†–¢–Å–ñ =====
function generateBlueprintSVG(data) {
  return `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 800" style="background: #0a1628;">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <text x="300" y="40" font-family="Arial" font-size="24" font-weight="bold" fill="#6ab2f2" text-anchor="middle">
    –¢–ï–•–ù–Ü–ß–ù–ï –ó–ê–í–î–ê–ù–ù–Ø
  </text>
  <text x="300" y="65" font-family="Arial" font-size="14" fill="#6ab2f2" text-anchor="middle" opacity="0.7">
    –ö—Ä–µ–º—É–∞ | –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ç–æ—Ä—Ç—ñ–≤
  </text>
  
  <!-- –†–∞–º–∫–∞ -->
  <rect x="40" y="90" width="520" height="650" fill="none" stroke="#6ab2f2" stroke-width="2" stroke-dasharray="10,5"/>
  
  <!-- –°–µ—Ç–∫–∞ —Ñ–æ–Ω–∞ -->
  <defs>
    <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
      <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#6ab2f2" stroke-width="0.5" opacity="0.1"/>
    </pattern>
  </defs>
  <rect x="40" y="90" width="520" height="650" fill="url(#grid)"/>
  
  <!-- –î–∞–Ω–Ω—ã–µ -->
  <text x="70" y="140" font-family="Arial" font-size="16" font-weight="bold" fill="#f27db0">
    –¢–∏–ø —Ç–æ—Ä—Ç–∞:
  </text>
  <text id="blueprint-cake-type" x="200" y="140" font-family="Arial" font-size="16" fill="#ffffff">
    ${data.type}
  </text>
  
  <text x="70" y="190" font-family="Arial" font-size="16" font-weight="bold" fill="#6ab2f2">
    –ù–∞—á–∏–Ω–∫–∞:
  </text>
  <text id="blueprint-filling" x="200" y="190" font-family="Arial" font-size="16" fill="#ffffff">
    ${data.filling}
  </text>
  
  <text x="70" y="240" font-family="Arial" font-size="16" font-weight="bold" fill="#a3f26a">
    –î–æ–±–∞–≤–∫–∏:
  </text>
  <text id="blueprint-additives" x="200" y="240" font-family="Arial" font-size="16" fill="#ffffff">
    ${data.additive}
  </text>
  
  <text x="70" y="290" font-family="Arial" font-size="16" font-weight="bold" fill="#f7a632">
    –§–æ—Ä–º–∞—Ç:
  </text>
  <text id="blueprint-format" x="200" y="290" font-family="Arial" font-size="16" fill="#ffffff">
    ${data.format}
  </text>
  
  <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π -->
  <text x="70" y="350" font-family="Arial" font-size="16" font-weight="bold" fill="#6ab2f2">
    –ö–æ–º–µ–Ω—Ç–∞—Ä:
  </text>
  <foreignObject x="70" y="365" width="460" height="350">
    <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: Arial; font-size: 14px; color: #ffffff; line-height: 1.6; word-wrap: break-word;">
      ${data.comment}
    </div>
  </foreignObject>
  
  <!-- –§—É—Ç–µ—Ä -->
  <text x="300" y="760" font-family="Arial" font-size="12" fill="#6ab2f2" text-anchor="middle" opacity="0.6">
    –í—ñ–¥–ø—Ä–∞–≤—Ç–µ —Ü–µ –¢–ó –∫–æ–Ω–¥–∏—Ç–µ—Ä—É —Ä–∞–∑–æ–º —ñ–∑ —Ñ–æ—Ç–æ –±–∞–∂–∞–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω—É
  </text>
</svg>
  `;
}

// ===== –°–û–ó–î–ê–ù–ò–ï PDF =====
async function generatePDF(svgString) {
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF('p', 'mm', 'a4');
  
  // –°–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è SVG
  const tempDiv = document.createElement('div');
  tempDiv.style.position = 'absolute';
  tempDiv.style.left = '-9999px';
  tempDiv.innerHTML = svgString;
  document.body.appendChild(tempDiv);
  
  const svgElement = tempDiv.querySelector('svg');
  
  if (!svgElement) {
    console.error('SVG —ç–ª–µ–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω');
    document.body.removeChild(tempDiv);
    return null;
  }
  
  try {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º svg2pdf –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
    await svg2pdf(svgElement, pdf, {
      x: 5,
      y: 5,
      width: 200,
      height: 267
    });
    
    document.body.removeChild(tempDiv);
    return pdf;
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è PDF:', error);
    document.body.removeChild(tempDiv);
    
    // –ó–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç - —Å–æ–∑–¥–∞—ë–º –ø—Ä–æ—Å—Ç–æ–π PDF —Å —Ç–µ–∫—Å—Ç–æ–º
    pdf.setFontSize(16);
    pdf.text('–¢–ï–•–ù–Ü–ß–ù–ï –ó–ê–í–î–ê–ù–ù–Ø', 105, 20, { align: 'center' });
    pdf.setFontSize(12);
    
    const data = getSelectedData();
    let y = 40;
    pdf.text(`–¢–∏–ø —Ç–æ—Ä—Ç–∞: ${data.type}`, 20, y);
    y += 10;
    pdf.text(`–ù–∞—á–∏–Ω–∫–∞: ${data.filling}`, 20, y);
    y += 10;
    pdf.text(`–î–æ–±–∞–≤–∫–∏: ${data.additive}`, 20, y);
    y += 10;
    pdf.text(`–§–æ—Ä–º–∞—Ç: ${data.format}`, 20, y);
    y += 20;
    pdf.text('–ö–æ–º–µ–Ω—Ç–∞—Ä:', 20, y);
    y += 10;
    
    const commentLines = pdf.splitTextToSize(data.comment, 170);
    pdf.text(commentLines, 20, y);
    
    return pdf;
  }
}

// ===== –ü–û–ö–ê–ó –ú–û–î–ê–õ–ö–ò =====
// ===== –û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê =====
// ===== –û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê =====
document.getElementById('createBtn').onclick = async function() {
  const data = getSelectedData();
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª–æ–∞–¥–µ—Ä
  const loader = document.getElementById('loader');
  loader.querySelector('.loader-text').textContent = '–°—Ç–≤–æ—Ä—é—î–º–æ –∫—Ä–µ—Å–ª–µ–Ω–Ω—è...';
  loader.classList.add('active');
  
  // –°–æ–∑–¥–∞—ë–º iframe –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ blueprint
  const iframe = document.createElement('iframe');
  iframe.style.position = 'absolute';
  iframe.style.left = '-9999px';
  iframe.style.width = '600px';
  iframe.style.height = '800px';
  document.body.appendChild(iframe);
  
  // –§–æ—Ä–º–∏—Ä—É–µ–º URL blueprint —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
  const params = new URLSearchParams({
    type: data.type,
    filling: data.filling,
    additive: data.additive,
    format: data.format,
    comment: data.comment,
    preview: 'true' // —Ñ–ª–∞–≥ —á—Ç–æ —ç—Ç–æ preview-—Ä–µ–∂–∏–º
  });
  
  iframe.src = `blueprint.html?${params.toString()}`;
  
  // –ñ–¥—ë–º –∑–∞–≥—Ä—É–∑–∫–∏ iframe
  iframe.onload = async function() {
    // –î–∞—ë–º –≤—Ä–µ–º—è –Ω–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
    setTimeout(async () => {
      try {
        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
        const blueprintContainer = iframeDoc.getElementById('blueprint-container');
        
        if (!blueprintContainer) {
          console.error('Blueprint container not found');
          loader.classList.remove('active');
          document.body.removeChild(iframe);
          return;
        }
        
        // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ canvas
        const canvas = await html2canvas(blueprintContainer, {
          backgroundColor: '#0a1628',
          scale: 2,
          logging: false,
          useCORS: true
        });
        
        // –ü–æ–ª—É—á–∞–µ–º data URL –¥–ª—è preview
        const imageUrl = canvas.toDataURL('image/png');
        
        // –£–¥–∞–ª—è–µ–º iframe
        document.body.removeChild(iframe);
        
        // –°–∫—Ä—ã–≤–∞–µ–º –ª–æ–∞–¥–µ—Ä –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É
        loader.classList.remove('active');
        showPDFModal(imageUrl, canvas);
        
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è preview:', error);
        loader.classList.remove('active');
        document.body.removeChild(iframe);
        alert('–ü–æ–º–∏–ª–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫—Ä–µ—Å–ª–µ–Ω–Ω—è. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.');
      }
    }, 1000); // –¥–∞—ë–º 1 —Å–µ–∫—É–Ω–¥—É –Ω–∞ –ø–æ–ª–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
  };
};
// ===== –ü–û–ö–ê–ó –ú–û–î–ê–õ–ö–ò =====
function showPDFModal(imageUrl, canvas) {
  const modal = document.getElementById('pdfModal');
  const preview = document.getElementById('pdfPreview');
  
  // –í—Å—Ç–∞–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ preview
  preview.innerHTML = `<img src="${imageUrl}" style="width: 100%; height: auto; display: block; border-radius: 8px;">`;
  modal.classList.add('active');
  
  // –ö–Ω–æ–ø–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
  document.getElementById('downloadBtn').onclick = function() {
    canvas.toBlob(blob => {
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'kremua-cake-blueprint.png';
      link.click();
      URL.revokeObjectURL(url);
    });
  };
  
  // –ó–∞–∫—Ä—ã—Ç–∏–µ
  document.getElementById('closeModalBtn').onclick = function() {
    modal.classList.remove('active');
  };
  
  modal.onclick = function(e) {
    if (e.target === modal) {
      modal.classList.remove('active');
    }
  };
}
// ===== –°–ö–†–´–¢–ò–ï –õ–û–ê–î–ï–†–ê –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï =====
window.addEventListener('load', () => {
  setTimeout(() => {
    document.getElementById('loader').classList.remove('active');
  }, 1500); // 1.5 —Å–µ–∫—É–Ω–¥—ã
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>
