<!DOCTYPE html>
<html lang="ru"> 
<head>
<meta charset="UTF-8">
<title>Кремуа | Лотерея</title> 
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="icon" href="https://github.com/cakeboxdeveloper/kremua/raw/refs/heads/main/AIcon.ico" type="image/x-icon">

<style>
/* Сокращенные стили для краткости, сохрани свои оригинальные из Bug.txt */
body { margin: 0; font-family: Arial, sans-serif; background: #17212b; color: white; overflow-x: hidden; display: flex; align-items: center; justify-content: center; min-height: 100vh; }
.preloader, .loader { position: fixed; inset: 0; background: #17212b; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 10000; transition: opacity 0.5s ease; }
.hidden { opacity: 0; pointer-events: none; }
.promo-overlay { position: fixed; inset: 0; background: transparent; backdrop-filter: blur(50px); -webkit-backdrop-filter: blur(50px); z-index: 8888; display: flex; align-items: center; justify-content: center; opacity: 0; pointer-events: none; transition: opacity 0.4s ease; }
.promo-overlay.active { opacity: 1; pointer-events: all; }
.promo-image-wrapper { position: relative; width: 100%; aspect-ratio: 2 / 1; max-width: 600px; margin: 0 auto; animation: gentle-sway 4s ease-in-out infinite; -webkit-mask-image: url('https://raw.githubusercontent.com/CakeBoxDeveloper/kremua/5793408ec6209b2e840db457f59ebd2e38c43c19/CPNSVG11.svg'); -webkit-mask-size: 100% 100%; -webkit-mask-repeat: no-repeat; }
.promo-animation-webm { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: contain; z-index: 2; display: none; transform: scale(1.08); }
.promo-animation-webm.active { display: block; }
/* Добавь остальные свои стили из оригинального файла здесь */
</style>
</head>
<body>

<div id="preloader" class="preloader">
  <img src="https://github.com/cakeboxdeveloper/kremua/blob/main/Spin.webp?raw=true" width="120" alt="Завантаження">
  <div class="preloader-text">Завантаження...</div>
</div>

<div id="loader" class="loader hidden">
  <img src="https://github.com/cakeboxdeveloper/kremua/blob/main/RollingAnim.webp?raw=true" style="width: 90vw; height: 150px; object-fit: cover;" alt="Рулетка">
  <div class="loader-text">Генеруємо ваш промокод...</div>
</div>

<div id="promoOverlay" class="promo-overlay">
  <div class="promo-card">
    <div class="promo-title" id="promoTitle">Вітаємо! Ось ваш промокод!</div>
    <div class="promo-hint">швидше тисни на промокод, щоб скопіювати його</div>
    <div class="promo-image-wrapper">
      <img src="https://raw.githubusercontent.com/cakeboxdeveloper/kremua/78ef867be64454e2ba264502e940f68f684cc588/CPNSVG15StaticCurvesClean.svg" class="promo-base-svg" alt="Base">
      
      <video class="promo-animation-webm promo-video-yellow" src="https://raw.githubusercontent.com/cakeboxdeveloper/kremua/main/FinalY2.webm" loop muted playsinline autoplay preload="auto"></video>
      <video class="promo-animation-webm promo-video-red" src="https://raw.githubusercontent.com/cakeboxdeveloper/kremua/main/FinalR2.webm" loop muted playsinline autoplay preload="auto"></video>
      <video class="promo-animation-webm promo-video-blue" src="https://raw.githubusercontent.com/cakeboxdeveloper/kremua/main/FinalB2.webm" loop muted playsinline autoplay preload="auto"></video>
      <video class="promo-animation-webm promo-video-green" src="https://raw.githubusercontent.com/cakeboxdeveloper/kremua/main/FinalG2.webm" loop muted playsinline autoplay preload="auto"></video>
      
      <div class="promo-code-box" id="promoCode" onclick="copyPromoCode(event)">XXXX-XXXX-XXXX</div>
    </div>
  </div>
</div>

<script>
const coupons = [
  { title: "Жовтий купон!", videoClass: "promo-video-yellow", codeColor: "#af8246", discount: "15%" },
  { title: "Червоний купон!", videoClass: "promo-video-red", codeColor: "#6d2121", discount: "10%" },
  { title: "Синій купон!", videoClass: "promo-video-blue", codeColor: "#5c94cc", discount: "20%" },
  { title: "Зелений купон!", videoClass: "promo-video-green", codeColor: "#005330", discount: "50%" }
];

// Имитация загрузки и запуск
window.addEventListener('load', () => {
  setTimeout(() => {
    document.getElementById('preloader').classList.add('hidden');
    startLottery(); 
  }, 2000);
});

function startLottery() {
  const loader = document.getElementById('loader');
  loader.classList.remove('hidden');
  
  // Выбираем случайный купон
  const selected = coupons[Math.floor(Math.random() * coupons.length)];
  
  setTimeout(() => {
    loader.classList.add('hidden');
    showPromo(selected);
  }, 4000);
}

function showPromo(coupon) {
  const overlay = document.getElementById('promoOverlay');
  const title = document.getElementById('promoTitle');
  const codeBox = document.getElementById('promoCode');
  
  // Активируем нужное видео
  document.querySelectorAll('.promo-animation-webm').forEach(v => {
      v.classList.remove('active');
      v.pause(); // Останавливаем неактивные для экономии ресурсов
  });
  
  const activeVideo = document.querySelector('.' + coupon.videoClass);
  activeVideo.classList.add('active');
  activeVideo.play().catch(e => console.log("Autoplay blocked:", e)); // Обработка блокировки автоплея

  title.innerText = "Тобi випав " + coupon.title;
  codeBox.style.color = coupon.codeColor;
  codeBox.innerText = "KREM-" + Math.random().toString(36).substr(2, 9).toUpperCase();
  
  overlay.classList.add('active');
}

function copyPromoCode(event) {
  const text = event.target.innerText;
  navigator.clipboard.writeText(text).then(() => {
    alert("Скопійовано: " + text);
  });
}
</script>
</body>
</html>
